<html>
	<head>
		<title>SVGTree demo</title>
		<script src="tree.js"></script>
	</head>
	<body>
		<div>
			height: 
			<select id="level" class="redraw">
				<option value="1">
					1
				</option>
				<option value="2">
					2
				</option>
				<option value="3">
					3
				</option>
				<option value="4">
					4
				</option>
				<option value="5" selected>
					5
				</option>
				<option value="6">
					6
				</option>
				<option value="7">
					7
				</option>
				<option value="8">
					8
				</option>
				<option value="9">
					9
				</option>
				<option value="10">
					10
				</option>
				<option value="11">
					11
				</option>
				<option value="12">
					12
				</option>
			</select>
		</div>
		<div>
			<input id="sym" class="redraw" type="checkbox" checked>symmetrical branch splits
		</div>
		<div>
			<input id="shorter" class="redraw" type="checkbox" checked>variable length
		</div>
		<div>
			length decrease ratio: <input id="length-ratio" class="redraw" type="number" step="0.05" value="0.8">
		</div>
		<div>
			<input id="thinner" class="attribute" type="checkbox" checked>variable thickness
		</div>
		<div>
			base stroke width: <input id="thickness" class="attribute" type="number" value="2" step="0.5">
		</div>
		<button onclick="regenerateTree()">regenerate</button><br>
		<button onclick="randomize()">random</button>
		<div id="tree-canvas">

		</div>
	</body>
	<script>
	function $(selector){
		return document.getElementById(selector);
	}

	var max_level = 12;

	var tree_canvas = new SVGTree.Canvas("#tree-canvas", 600, 600);

	function randomBool(){
		var rand = Math.random();
		return rand>0.5;
	}

	function randomize(){
		$("thinner").checked = randomBool();
		$("thickness").value = Math.floor(Math.random()*2*10)/10+1;
		$("sym").checked = randomBool();
		$("shorter").checked = randomBool();
		$("length-ratio").value = Math.floor(Math.random()*0.8*10000)/10000+0.2;
		$("level").value = Math.floor(9*Math.random()+2);
		regenerateTree();
	}

	function attributeChange(){
		tree_canvas.decreasing_width = $("thinner").checked;
		tree_canvas.base_stroke_width=$("thickness").value;
		tree_canvas.draw();
	}

	function regenerateTree(){
		tree_canvas.symmetrical = $("sym").checked;
		tree_canvas.decreasing_length= $("shorter").checked;
		tree_canvas.decreasing_length_ratio=$("length-ratio").value;
		tree_canvas.generateTree($("level").value);
		attributeChange();
	}

	[].forEach.call(
	  	document.querySelectorAll('.attribute'), 
	  	function(el){
	  		console.log(el);
	    	el.onchange = function(){
	    		console.log(el.value);
	    		console.log(el.checked);
	    		attributeChange();
	    	};
	  	}
	);
	
	[].forEach.call(
	  	document.querySelectorAll('.redraw'), 
	  	function(el){
	  		console.log(el);
	    	el.onchange = function(){
	    		console.log("change");
	    		console.log(el.value);
	    		console.log(el.checked);
	    		regenerateTree();
	    	};
	  	}
	);

	regenerateTree();
	</script>
</html>
